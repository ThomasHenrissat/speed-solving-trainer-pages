function e(e){return e&&e.__esModule?e.default:e}var t=globalThis,a={},s={},r=t.parcelRequirec931;null==r&&((r=function(e){if(e in a)return a[e].exports;if(e in s){var t=s[e];delete s[e];var r={id:e,exports:{}};return a[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){s[e]=t},t.parcelRequirec931=r),r.register;var n=r("ayMG0"),i={},o={},l=r("g779E"),c={};c=function(e,t){for(var a=-1,s=null==e?0:e.length;++a<s&&!1!==t(e[a],a,e););return e};var u=r("5i71d"),d={},p=r("cYlGN"),m=r("LAMcS");d=function(e,t){return e&&p(t,m(t),e)};var f={},p=r("cYlGN"),h=r("f4lqP");f=function(e,t){return e&&p(t,h(t),e)};var j=r("uQ1Em"),b=r("aA0pv"),x={},p=r("cYlGN"),g=r("6YcYN");x=function(e,t){return p(e,g(e),t)};var v={},p=r("cYlGN"),N={},S=r("hynws"),y=r("cdnOB"),g=r("6YcYN"),w=r("clnSu");N=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)S(t,g(e)),e=y(e);return t}:w,v=function(e,t){return p(e,N(e),t)};var _=r("apVCl"),z={},$=r("ctgi8"),h=r("f4lqP");z=function(e){return $(e,h,N)};var E=r("67A6V"),k={},C=Object.prototype.hasOwnProperty;k=function(e){var t=e.length,a=new e.constructor(t);return t&&"string"==typeof e[0]&&C.call(e,"index")&&(a.index=e.index,a.input=e.input),a};var I={},M=r("jjbq1"),A={},M=r("jjbq1");A=function(e,t){var a=t?M(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)};var q={},G=/\w*$/;q=function(e){var t=new e.constructor(e.source,G.exec(e));return t.lastIndex=e.lastIndex,t};var P={},B=r("57wYk"),O=B?B.prototype:void 0,V=O?O.valueOf:void 0;P=function(e){return V?Object(V.call(e)):{}};var R=r("5JAGM");I=function(e,t,a){var s=e.constructor;switch(t){case"[object ArrayBuffer]":return M(e);case"[object Boolean]":case"[object Date]":return new s(+e);case"[object DataView]":return A(e,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return R(e,a);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(e);case"[object RegExp]":return q(e);case"[object Symbol]":return P(e)}};var L=r("dFJsF"),U=r("o8HxT"),F=r("f504n"),H={},D={},E=r("67A6V"),T=r("8l89S");D=function(e){return T(e)&&"[object Map]"==E(e)};var Y=r("91Qdd"),J=r("jIny1"),K=J&&J.isMap;H=K?Y(K):D;var Q=r("lsJ54"),W={},Z={},E=r("67A6V"),T=r("8l89S");Z=function(e){return T(e)&&"[object Set]"==E(e)};var Y=r("91Qdd"),J=r("jIny1"),X=J&&J.isSet;W=X?Y(X):Z;var m=r("LAMcS"),h=r("f4lqP"),ee="[object Arguments]",et="[object Function]",ea="[object Object]",es={};es[ee]=es["[object Array]"]=es["[object ArrayBuffer]"]=es["[object DataView]"]=es["[object Boolean]"]=es["[object Date]"]=es["[object Float32Array]"]=es["[object Float64Array]"]=es["[object Int8Array]"]=es["[object Int16Array]"]=es["[object Int32Array]"]=es["[object Map]"]=es["[object Number]"]=es[ea]=es["[object RegExp]"]=es["[object Set]"]=es["[object String]"]=es["[object Symbol]"]=es["[object Uint8Array]"]=es["[object Uint8ClampedArray]"]=es["[object Uint16Array]"]=es["[object Uint32Array]"]=!0,es["[object Error]"]=es[et]=es["[object WeakMap]"]=!1,o=function e(t,a,s,r,n,i){var o,p=1&a,g=2&a,N=4&a;if(s&&(o=n?s(t,r,n,i):s(t)),void 0!==o)return o;if(!Q(t))return t;var S=U(t);if(S){if(o=k(t),!p)return b(t,o)}else{var y=E(t),w=y==et||"[object GeneratorFunction]"==y;if(F(t))return j(t,p);if(y==ea||y==ee||w&&!n){if(o=g||w?{}:L(t),!p)return g?v(t,f(o,t)):x(t,d(o,t))}else{if(!es[y])return n?t:{};o=I(t,y,p)}}i||(i=new l);var $=i.get(t);if($)return $;i.set(t,o),W(t)?t.forEach(function(r){o.add(e(r,a,s,r,t,i))}):H(t)&&t.forEach(function(r,n){o.set(n,e(r,a,s,n,t,i))});var C=N?g?z:_:g?h:m,M=S?void 0:C(t);return c(M||t,function(r,n){M&&(r=t[n=r]),u(o,n,e(r,a,s,n,t,i))}),o},i=function(e){return o(e,5)};var er=r("acw62"),en=r("aRPiL"),ei=r("izgog"),n=r("ayMG0"),er=r("acw62"),ei=r("izgog"),eo=r("6naUs"),n=r("ayMG0"),er=r("acw62"),el=r("iGgHx");function ec({callback:e,defaultValue:t,disabled:a=!1,label:s,largeLetterSpacing:r,max:i,min:o,required:l=!1,type:c}){let u="input",d=[u];r&&d.push(`${u}--large-letter-spacing`);let[p,m]=(0,er.useState)(null!=t?t:""),f=`input-${(0,el.getRandomInteger)(1e5,999999)}`;return(0,er.useEffect)(()=>{m(null!=t?t:"")},[t]),(0,n.jsxs)("div",{className:d.join(" "),children:[(0,n.jsxs)("label",{className:`${u}__label`,htmlFor:f,children:[s," ",l&&(0,n.jsx)("span",{className:`${u}__required`,children:"*"})]}),(0,n.jsx)("input",{className:`${u}__input`,disabled:a,id:f,max:i,min:o,onBlur:function(t){let a=t.target.value.trim();m(a),e&&e(a)},onChange:function(t){let a=t.target.value;m(a),e&&e(a)},type:c,required:l,value:p})]})}var eu=r("bO1fg"),ed=r("6UJSz"),el=r("iGgHx"),ep=r("avait");function em({addSolution:e,duplicateCase:t,moveCase:a,openPreviewModal:s,puzzlePreviewHash:r,removeCase:i,removeSolution:o,setTrainer:l,trainer:c,trainerCaseId:u,trainerSetId:d}){let p="editor-case",m=(0,el.getCasesFromSet)(c,d).length,f=c.cases[u],h=f.solutions?.length||0;if(f)return(0,n.jsxs)("div",{className:p,children:[(0,n.jsxs)(eo.Group,{title:"Info",children:[(0,n.jsxs)("ul",{className:`${p}__input-list`,children:[(0,n.jsx)("li",{className:`${p}__id`,children:(0,n.jsx)(ec,{defaultValue:f.id,disabled:!0,label:"Id",required:!0,type:"text"})}),(0,n.jsx)("li",{className:`${p}__name`,children:(0,n.jsx)(ec,{callback:e=>{l({...c,cases:{...c.cases,[u]:{...c.cases[u],name:e}}})},defaultValue:f.name,label:"Name",required:!0,type:"text"})}),(0,n.jsx)("li",{className:`${p}__position`,children:(0,n.jsx)(ec,{callback:e=>{a(u,parseInt(e))},defaultValue:f.position.toString(),label:"Position",max:m-1,min:0,required:!0,type:"number"})})]}),(0,n.jsxs)(eu.List,{children:[(0,n.jsx)(ei.Button,{callback:()=>t(u),label:"Duplicate Case",iconName:"plus-square-double"}),(0,n.jsx)(ei.Button,{callback:()=>i(u),color:"red",label:"Remove Case",iconName:"trash"})]})]}),(0,n.jsxs)("div",{className:`${p}__columns`,children:[(0,n.jsx)("div",{className:`${p}__column`,children:function(){let e=(0,el.getCaseImageSource)(c.puzzleName,c.id,u);return(0,n.jsxs)(eo.Group,{alignment:"center",title:"Preview",children:[(0,n.jsx)("div",{className:`${p}__puzzle-preview`,children:(0,n.jsx)(ep.PuzzlePreview,{cacheRequests:!1,source:e},r)}),(0,n.jsx)(ei.Button,{callback:s,iconName:"paint-bucket-drip",label:"Edit Preview"})]})}()}),(0,n.jsxs)("div",{className:`${p}__column`,children:[(0,n.jsx)(eo.Group,{title:"Setup",children:(0,n.jsx)(ec,{callback:e=>{l({...c,cases:{...c.cases,[u]:{...c.cases[u],setup:e}}})},defaultValue:f.setup||"",label:"Setup",largeLetterSpacing:!0,type:"text"})}),(0,n.jsxs)(eo.Group,{title:`Solutions (${h})`,children:[(0,n.jsx)("div",{children:(0,n.jsx)(ei.Button,{callback:()=>e(u),iconName:"plus-square",label:"Add Solution"})}),f.solutions&&f.solutions.length>0&&(0,n.jsx)("ul",{className:`${p}__solutions`,children:f.solutions.map((e,t)=>(0,n.jsxs)(er.Fragment,{children:[(0,n.jsxs)("li",{className:`${p}__solution`,children:[(0,n.jsx)(ec,{callback:e=>{let a=c.cases[u].solutions||[];a[t]=e,l({...c,cases:{...c.cases,[u]:{...c.cases[u],solutions:a}}})},defaultValue:e,label:`Solution ${t+1}`,largeLetterSpacing:!0,required:!0,type:"text"}),(0,n.jsxs)(eu.List,{children:[h>1&&(0,n.jsx)(ei.Button,{callback:()=>j(t,t-1),iconName:"arrow-up",tooltip:"Move solution up"}),h>1&&(0,n.jsx)(ei.Button,{callback:()=>j(t,t+1),iconName:"arrow-down",tooltip:"Move solution down"}),(0,n.jsx)(ei.Button,{callback:()=>o(u,t),color:"red",iconName:"trash",label:"Remove Solution"})]})]}),t<h-1&&(0,n.jsx)(ed.Separator,{})]},`solution-${t}`))})]})]})]})]});function j(e,t){if(!f.solutions||h<=1)return;let a=f.solutions[e],s=f.solutions;s.splice(e,1),t<0?s.push(a):t>h-1?s.unshift(a):s.splice(t,0,a),l({...c,cases:{...c.cases,[u]:{...c.cases[u],solutions:s}}})}}var n=r("ayMG0"),er=r("acw62"),ef=r("ftrVQ"),el=r("iGgHx"),ei=r("izgog"),eo=r("6naUs"),eu=r("bO1fg"),ep=r("avait");function eh({trainer:e,trainerCaseId:t}){let a="editor-preview",[s,r]=(0,er.useState)("--color-ignore"),[i,o]=(0,er.useState)(Math.random().toString()),[l,c]=(0,er.useState)((0,el.getCaseImageSource)(e.puzzleName,e.id,t)),[u,d]=(0,er.useState)(),p=(0,ef.storeManager).getColorScheme(e.puzzleName);function m(e){if(!e)throw Error("Missing color name.");return(0,n.jsx)("button",{"aria-selected":e===s,className:`${a}__color`,onClick:()=>r(e),style:{backgroundColor:`var(${e})`},"data-tooltip":"Pick color","data-tooltip-position":"center",type:"button"})}return(0,n.jsxs)("div",{className:a,children:[(0,n.jsx)(eo.Group,{alignment:"center",title:"Puzzle",children:(0,n.jsx)("div",{className:`${a}__puzzle-preview`,onClick:e=>{"path"===e.target.tagName&&e.target.setAttribute("style",`fill: var(${s})`)},"data-tooltip":"Assign color","data-tooltip-position":"center",children:(0,n.jsx)(ep.PuzzlePreview,{cacheRequests:!1,hash:i,onErrorCallback:function(){c(`/assets/images/puzzles/${e.puzzleName}/${e.puzzleImage}.svg`)},onLoadCallback:function(e){if(!e)throw Error("Missing SVG reference.");d(e)},source:l})})}),(0,n.jsx)(eo.Group,{alignment:"center",title:"Color Palette",children:(0,n.jsxs)("ul",{className:`${a}__list`,children:[(0,n.jsx)("li",{className:`${a}__item`,children:m("--color-ignore")}),Object.keys(p).map(e=>(0,n.jsx)("li",{className:`${a}__item`,children:m(e)},`item-${e}`))]})}),(0,n.jsx)(eo.Group,{title:"Actions",children:(0,n.jsxs)(eu.List,{marginLeftIndex:2,children:[(0,n.jsx)(ei.Button,{callback:function(){c(`/assets/images/puzzles/${e.puzzleName}/${e.puzzleImage}.svg`),o(Math.random().toString())},color:"red",iconName:"arrow-counter-clockwise",label:"Reset Puzzle"}),(0,n.jsx)(ei.Button,{callback:function(){u?.current&&u.current.querySelectorAll("path").forEach(e=>{e.setAttribute("style","fill: var(--color-ignore)")})},iconName:"broom",label:"Empty Puzzle"}),(0,n.jsx)(ei.Button,{callback:function(){if(u&&u.current){let e=new Blob([u.current.outerHTML],{type:"image/svg+xml"}),a=document.createElement("a");a.href=URL.createObjectURL(e),a.download=`${t}.svg`,a.click()}},iconName:"arrow-half-square-down",label:"Download Image"})]})})]})}var n=r("ayMG0");r("acw62");var ei=r("izgog"),eo=r("6naUs"),eu=r("bO1fg"),el=r("iGgHx"),ej=r("d4TLH");function eb({addCase:e,duplicateSet:t,moveSet:a,openCaseModal:s,puzzlePreviewHash:r,removeSet:i,setTrainer:o,trainer:l,trainerSetId:c}){let u="editor-set",d=(0,el.getSets)(l).length,p=l.sets[c],m=(0,el.getCasesFromSet)(l,c);return(0,n.jsxs)("div",{className:u,children:[(0,n.jsxs)(eo.Group,{title:"Info",children:[(0,n.jsxs)("ul",{className:`${u}__input-list`,children:[(0,n.jsx)("li",{className:`${u}__id`,children:(0,n.jsx)(ec,{defaultValue:p.id,disabled:!0,label:"Id",required:!0,type:"text"})}),(0,n.jsx)("li",{className:`${u}__name`,children:(0,n.jsx)(ec,{callback:e=>{o({...l,sets:{...l.sets,[c]:{...l.sets[c],name:e}}})},defaultValue:p.name,label:"Name",required:!0,type:"text"})}),(0,n.jsx)("li",{className:`${u}__position`,children:(0,n.jsx)(ec,{callback:e=>{a(c,parseInt(e))},defaultValue:p.position.toString(),label:"Position",max:d-1,min:0,required:!0,type:"number"})})]}),(0,n.jsxs)(eu.List,{children:[(0,n.jsx)(ei.Button,{callback:()=>t(c),label:"Duplicate Set",iconName:"plus-square-double"}),(0,n.jsx)(ei.Button,{callback:()=>i(c),color:"red",label:"Remove Set",iconName:"trash"})]})]}),(0,n.jsxs)(eo.Group,{alignment:"left",title:`Cases (${m.length})`,children:[(0,n.jsx)(ei.Button,{callback:()=>e(c),iconName:"plus-square",label:"Add Case"}),m.length>0&&(0,n.jsx)("ul",{className:`${u}__cases`,children:m.map(e=>(0,n.jsx)("li",{className:`${u}__case`,children:e?(0,n.jsx)(ej.CasePreview,{cacheRequests:!1,callback:()=>s(e.id),name:e.name,position:e.position,puzzlePreviewHash:r,source:(0,el.getCaseImageSource)(l.puzzleName,l.id,e.id),tooltip:"Edit case"}):null},`case-${e.id}`))})]})]})}var ex=r("AUWqP"),eo=r("6naUs"),eu=r("bO1fg"),n=r("ayMG0"),er=r("acw62"),eg=r("k2p8j"),ev=r("cZKrT"),el=r("iGgHx");function eN({children:e,closeCallback:t,open:a=!1,title:s}){let r="modal",i=[r];a&&i.push(`${r}--open`);let o=(0,er.useRef)(null),l=(0,er.useRef)(null);function c(){a&&t()}return(0,ev.useEventListener)(document,"keydown",function(e){e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||"Escape"!==e.code||(e.preventDefault(),c())}),(0,er.useEffect)(()=>{a&&(l.current?.focus(),o.current&&(0,el.trapFocus)(o.current))},[a]),a?(0,n.jsx)("div",{"aria-modal":!0,className:i.join(" "),inert:a?null:"",ref:o,role:"dialog",children:(0,n.jsxs)("div",{className:`${r}__content`,children:[(0,n.jsx)("h1",{className:`${r}__title`,children:s}),(0,n.jsx)("div",{className:`${r}__header`,children:(0,n.jsx)(eg.ButtonRound,{callback:c,iconName:"x",ref:l,tooltip:"Close modal (Escape)",tooltipPosition:"right"})}),e]})}):null}var eS=r("fcogW"),n=r("ayMG0"),er=r("acw62"),el=r("iGgHx");function ey({callback:e,defaultValue:t,label:a,options:s}){let r="select",[i,o]=(0,er.useState)(t),l=`select-${(0,el.getRandomInteger)(1e5,999999)}`;return(0,er.useEffect)(()=>{o(t)},[s]),(0,n.jsxs)("div",{className:r,children:[(0,n.jsx)("label",{className:`${r}__label`,htmlFor:l,children:a}),(0,n.jsx)("select",{className:`${r}__select`,id:l,onChange:function(t){o(t.target.value),e(t.target.value)},value:i,children:s.map((e,t)=>(0,n.jsx)("option",{value:e.value,children:e.label},`select-${l}-option-${t}`))})]})}var n=r("ayMG0"),er=r("acw62"),el=r("iGgHx");function ew({callback:e,defaultValue:t,label:a,required:s=!1}){let r="textarea",[i,o]=(0,er.useState)(t),l=`textarea-${(0,el.getRandomInteger)(1e5,999999)}`;return(0,er.useEffect)(()=>{o(t)},[t]),(0,n.jsxs)("div",{className:r,children:[(0,n.jsxs)("label",{className:`${r}__label`,htmlFor:l,children:[a," ",s&&(0,n.jsx)("span",{className:`${r}__required`,children:"*"})]}),(0,n.jsx)("textarea",{className:`${r}__textarea`,id:l,onChange:function(t){o(t.target.value),e(t.target.value)},required:s,value:i})]})}var e_=r("65UFG"),ef=r("ftrVQ"),el=r("iGgHx");const ez=document.getElementById("root");ez?(0,en.createRoot)(ez).render((0,n.jsx)(ex.ErrorBoundary,{children:(0,n.jsx)(function(){let t="editor",[a,s]=(0,er.useState)({id:"example",name:"Example",method:"Other",puzzleName:"3x3x3",puzzleImage:"three-faces",version:1,authors:"Author",description:"Description.",sets:{0:{id:"0",position:0,name:"Example Set"}},cases:{0:{id:"0",position:0,setId:"0",name:"Example Case",setup:"R U R' U'",solutions:["U R U' R'"]}}}),[r,o]=(0,er.useState)("0"),[l,c]=(0,er.useState)("0"),[u,d]=(0,er.useState)(!1),[p,m]=(0,er.useState)(!1),[f,h]=(0,er.useState)(!1),[j,b]=(0,er.useState)(Math.random().toString());document.title="SST - Editor";let x=(0,el.getSets)(a),g=x.length,v=(0,el.getSets)(a,!1).length,N=(0,el.getCases)(a,!1).length;return console.log(a),(0,er.useEffect)(()=>{(0,el.updateColorSchemeCustomProperties)((0,ef.storeManager).getColorScheme(a.puzzleName)),window.addEventListener("beforeunload",e=>{e.preventDefault()})},[]),(0,er.useEffect)(()=>{(0,el.updateColorSchemeCustomProperties)((0,ef.storeManager).getColorScheme(a.puzzleName))},[a.puzzleName]),(0,er.useEffect)(()=>{(u||p)&&(0,el.disableBodyScroll)(),u||p||(0,el.enableBodyScroll)()},[u,p]),(0,n.jsx)(eS.Page,{title:"Editor",children:(0,n.jsxs)("div",{className:t,children:[(0,n.jsxs)("div",{className:`${t}__content`,children:[(0,n.jsxs)(eo.Group,{title:"Info",children:[(0,n.jsxs)("ul",{className:`${t}__input-list`,children:[(0,n.jsx)("li",{className:`${t}__id`,children:(0,n.jsx)(ec,{callback:e=>{s({...a,id:e})},defaultValue:a.id,label:"Id",required:!0,type:"text"})}),(0,n.jsx)("li",{className:`${t}__name`,children:(0,n.jsx)(ec,{callback:e=>{s({...a,name:e})},defaultValue:a.name,label:"Name",required:!0,type:"text"})})]}),(0,n.jsxs)("ul",{className:`${t}__input-list`,children:[(0,n.jsx)("li",{className:`${t}__name`,children:(0,n.jsx)(ec,{callback:e=>{s({...a,method:e})},defaultValue:a.method,label:"Method",required:!0,type:"text"})}),(0,n.jsx)("li",{className:`${t}__version`,children:(0,n.jsx)(ec,{callback:e=>{s({...a,version:parseInt(e)})},defaultValue:a.version.toString(),label:"Version",required:!0,type:"number"})})]}),(0,n.jsx)(ec,{callback:e=>{s({...a,authors:e})},defaultValue:a.authors,label:"Authors",required:!0,type:"text"}),(0,n.jsx)(ew,{callback:e=>{s({...a,description:e})},defaultValue:a.description,label:"Description",required:!0})]}),function(){let e=[];(0,e_.puzzleNames).forEach(t=>{e.push({label:t,value:t})});let t=[];return(0,e_.puzzleImages)[a.puzzleName].forEach(e=>{t.push({label:(0,el.capitalize)(e.split(".")[0].replace("-"," ")),value:e})}),(0,n.jsx)(eo.Group,{alignment:"left",title:"Configuration",children:(0,n.jsxs)(eu.List,{children:[(0,n.jsx)(ey,{callback:e=>{s({...a,puzzleName:e})},defaultValue:a.puzzleName,label:"Puzzle",options:e}),(0,n.jsx)(ey,{callback:e=>{s({...a,puzzleImage:e})},defaultValue:a.puzzleImage,label:"Preview",options:t})]})})}(),(0,n.jsxs)(eo.Group,{alignment:"left",title:`Sets (${g})`,children:[(0,n.jsx)(ei.Button,{callback:function(){s({...a,sets:{...a.sets,[v]:{id:v.toString(),position:g,name:"New Set"}}}),o(v.toString()),d(!0)},iconName:"plus-square",label:"Add Set"}),g>0&&(0,n.jsx)("ul",{className:`${t}__sets`,children:x.map((e,s)=>(0,n.jsx)("li",{className:`${t}__set-item`,children:function(e){if(!e)throw Error("Missing trainer set.");let s=(0,el.getCasesFromSet)(a,e.id).length;return(0,n.jsxs)("button",{className:`${t}__set`,"data-tooltip":"Edit set","data-tooltip-position":"center",onClick:()=>(function(e){if(!e)throw Error("Missing set id.");o(e),d(!0)})(e.id),children:[(0,n.jsx)("span",{className:`${t}__set-id`,children:e.position}),(0,n.jsx)("span",{className:`${t}__set-name`,children:e.name}),(0,n.jsx)("span",{className:`${t}__set-cases`,children:s})]})}(e)},`set-${s}`))})]}),(0,n.jsx)(eo.Group,{title:"Actions",children:(0,n.jsxs)(eu.List,{children:[(0,n.jsx)(ei.Button,{callback:function(){if(window.confirm("Are you sure you want to import a trainer? This will overwrite the current data, it cannot be undone.")){let e=document.createElement("input");e.type="file",e.addEventListener("change",()=>{e.files?.[0].text().then(e=>{try{let t=JSON.parse(e);s(t)}catch(e){console.error(e),window.alert("Error: Corrupted trainer.")}})}),e.click()}},iconName:"arrow-half-square-right",label:"Import"}),(0,n.jsx)(ei.Button,{callback:function(){let e=new Blob([JSON.stringify(a)],{type:"application/json"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="data.json",t.click()},iconName:"arrow-half-square-left",label:"Export"})]})})]}),(0,n.jsx)(eN,{closeCallback:()=>{p||d(!1)},open:u,title:a.sets?.[r]?.name,children:(0,n.jsx)(eb,{addCase:function(e){if(!e)throw Error("Missing set id.");let t=(0,el.getCasesFromSet)(a,e).length;s({...a,cases:{...a.cases,[N]:{id:N.toString(),position:t,setId:e,name:"New Case",solutions:[""]}}}),c(N.toString()),m(!0)},duplicateSet:function(t){if(!t)throw Error("Missing set id.");let r=e(i)(a.cases);(0,el.getCasesFromSet)(a,t).forEach((t,a)=>{let s=e(i)(t);s.id=(N+a).toString(),s.setId=v.toString(),s.name=`Copy of ${t.name}`,r[N+a]=s}),s({...a,sets:{...a.sets,[v.toString()]:{...a.sets[t],id:v.toString(),position:g,name:`Copy of ${a.sets[t].name}`}},cases:r}),o(v.toString())},moveSet:function(t,r){if(!t)throw Error("Missing set id.");if("number"!=typeof r)throw Error("Missing new position.");let n=e(i)(a.sets),o=n[t].position;r<a.sets[t].position&&Object.keys(n).forEach(e=>{e===t?n[e].position=r:n[e].position>=r&&n[e].position<o&&n[e].position++}),r>a.sets[t].position&&Object.keys(n).forEach(e=>{e===t?n[e].position=r:n[e].position>o&&n[e].position<=r&&n[e].position--}),s({...a,sets:n})},openCaseModal:function(e){if(!e)throw Error("Missing case id.");c(e),m(!0)},puzzlePreviewHash:j,removeSet:function(t){if(!t)throw Error("Missing set id.");if(!window.confirm("Are you sure you want to remove this set and all it's cases?"))return;let r=e(i)(a.sets);r[t]={...r[t],deleted:!0},Object.keys(r).forEach(e=>{!r[e].deleted&&r[e].position>r[t].position&&r[e].position--});let n=e(i)(a.cases);Object.keys(n).forEach(e=>{n[e].setId===t&&(n[e]={...n[e],deleted:!0})}),d(!1),s({...a,sets:r,cases:n})},setTrainer:s,trainer:a,trainerSetId:r})}),(0,n.jsx)(eN,{closeCallback:()=>{f||m(!1)},open:p,title:a.cases?.[l]?.name,children:(0,n.jsx)(em,{addSolution:function(e){if(!e)throw Error("Missing case id.");let t=a.cases[e].solutions||[];t.push(""),s({...a,cases:{...a.cases,[e]:{...a.cases[e],solutions:t}}})},duplicateCase:function(t){if(!t)throw Error("Missing case id.");let r=(0,el.getCasesFromSet)(a,a.cases[t].setId).length,n=e(i)(a.cases[t]);n.id=N.toString(),n.position=r,n.name=`Copy of ${a.cases[t].name}`,s({...a,cases:{...a.cases,[N]:n}}),c(N.toString())},moveCase:function(t,r){if(!t)throw Error("Missing case id.");if("number"!=typeof r)throw Error("Missing new position.");let n=e(i)(a.cases),o=n[t].setId,l=n[t].position;r<a.cases[t].position&&Object.keys(n).forEach(e=>{n[e].setId===o&&(e===t?n[e].position=r:n[e].position>=r&&n[e].position<l&&n[e].position++)}),r>a.cases[t].position&&Object.keys(n).forEach(e=>{n[e].setId===o&&(e===t?n[e].position=r:n[e].position>l&&n[e].position<=r&&n[e].position--)}),s({...a,cases:n})},openPreviewModal:function(){h(!0)},puzzlePreviewHash:j,removeCase:function(t){if(!t)throw Error("Missing case id.");if(!window.confirm("Are you sure you want to remove this case?"))return;let r=e(i)(a.cases);r[t]={...r[t],deleted:!0},Object.keys(r).forEach(e=>{!r[e].deleted&&r[e].position>r[t].position&&r[e].position--}),m(!1),s({...a,cases:r})},removeSolution:function(e,t){if(!e)throw Error("Missing case id.");if("number"!=typeof t)throw Error("Missing solution index.");if(!window.confirm("Are you sure you want to remove this solution?"))return;let r=a.cases[e].solutions||[];r.splice(t,1),s({...a,cases:{...a.cases,[e]:{...a.cases[e],solutions:r}}})},setTrainer:s,trainer:a,trainerCaseId:l,trainerSetId:r})}),(0,n.jsx)(eN,{closeCallback:()=>{h(!1),b(Math.random().toString())},open:f,title:a.cases?.[l]?.name,children:(0,n.jsx)(eh,{trainer:a,trainerCaseId:l})})]})})},{})})):console.error("Could not find root element.");
//# sourceMappingURL=editor.bbda1603.js.map
